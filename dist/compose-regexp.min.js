!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("compose-regexp",["exports"],e):e(n.composeRegexp={})}(this,function(n){"use strict";function e(n){return n instanceof RegExp?n.source:(n+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function t(n){if(n.indexOf("|")===-1)return!0;var e,t=0,r=!1;for(w.lastIndex=0;e=w.exec(n);)if(null==e[1]&&(r||"("!==e[0]||t++,r||")"!==e[0]||t--,r||"["!==e[0]&&"[-"!==e[0]||(r=!0),r&&"]"===e&&(r=!1),0===t&&!r&&"|"===e[0]))return!1;return!0}function r(n){if("("!==n.charAt(0)||")"!==n.charAt(n.length-1))return!1;var e,t=0,r=!1;for(w.lastIndex=0;e=w.exec(n);)if(null==e[1]){if(r||"("!==e[0]||t++,!r&&")"===e[0]&&0===--t&&e.index!==n.length-1)return!1;r||"["!==e[0]&&"[-"!==e||(r=!0),r&&"]"===e[0]&&(r=!1)}else if(e.index===n.length-2)return!1;return!0}function u(n){return n=e(n),t(n)?n:"(?:"+n+")"}function l(n){return 1===n.length||/^\\[^]$|^\[(?:\\[^]|[^\]])*\]$/.test(n)||r(n)}function i(){return arguments.length?new RegExp([].map.call(arguments,e).join("|")):h}function o(){return arguments.length?new RegExp([].map.call(arguments,u).join("")):h}function f(n){if(1===arguments.length)return h;var e=R.apply(o,arguments).source;return new RegExp(l(e)?e+n:"(?:"+e+")"+n)}function c(n){if(!E.test(n))throw new Error("Invalid suffix '"+n+"'.");return 1===arguments.length?f.bind(null,n):f.apply(null,arguments)}function a(n){if(!E.test(n))throw new Error("Invalid suffix '"+n+"'.");return 1===arguments.length?f.bind(null,n+"?"):(arguments[0]=n+"?",f.apply(null,arguments))}function p(n){return new RegExp("\\"+n)}function g(){return arguments.length?new RegExp("(?="+[].map.call(arguments,u).join("")+")"):h}function s(){return arguments.length?new RegExp("(?!"+[].map.call(arguments,u).join("")+")"):h}function x(n){var e,t=[].slice.call(arguments,1);return e=t.length?t.map(u).join(""):"",new RegExp(e,n)}function d(){return arguments.length?new RegExp("("+[].map.call(arguments,u).join("")+")"):new RegExp("()")}var h=new RegExp(""),w=/(\\[^])|[-()|\[\]]|\[\-/g,E=o(/^/,i("+","*","?",/\{\s*\d+(?:\s*,\s*)?\d*\s*\}/),/$/),R=f.call;n.either=i,n.sequence=o,n.greedy=c,n.frugal=a,n.ref=p,n.lookAhead=g,n.avoid=s,n.flags=x,n.capture=d});
