/**@license MIT-compose-regexp.js-©Pierre-Yves Gérardy*/
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define("compose-regexp",["exports"],n):n(e.composeRegexp={})}(this,function(e){"use strict";function n(e){return null==e?(console.trace(),{}):e.split("").reduce(function(e,n){return e[n]=!0,e},Object.create(null))}function t(e){return Object.keys(e).join("")}function r(){q=F.call(arguments,function(e){return n(e.flags||"")}).reduce(u,{})}function u(e,n){return Object.assign(e,n)}function i(e,n){return Object.keys(e).forEach(function(t){n[t]||delete e[t]}),e}function o(e,n){return Object.keys(e).forEach(function(t){n[t]&&delete e[t]}),e}function a(e){return e instanceof RegExp?e.source:String(e).replace(/[.?*+^$[\\(){|]/g,"\\$&")}function c(e){if(-1===e.indexOf("|"))return!1;var n,t=0,r=!1;for(B.lastIndex=0;n=B.exec(e);)if(null==n[1]&&(r||"("!==n[0]||t++,r||")"!==n[0]||t--,r||"["!==n[0]&&"[-"!==n[0]||(r=!0),r&&"]"===n[0]&&(r=!1),0===t&&!r&&"|"===n[0]))return!0;return!1}function f(e){return e=a(e),c(e)?"(?:"+e+")":e}function l(e){if("("!==e.charAt(0)||")"!==e.charAt(e.length-1))return!1;var n,t=0,r=!1;for(B.lastIndex=0;n=B.exec(e);)if(null==n[1]){if(r||"("!==n[0]||t++,!r&&")"===n[0]&&0===--t&&n.index!==e.length-1)return!1;r||"["!==n[0]&&"[-"!==n||(r=!0),r&&"]"===n[0]&&(r=!1)}else if(n.index===e.length-2)return!1;return!0}function p(e){return 1===e.length||q.u&&z.test(e)||U.test(e)||l(e)}function s(e){return e instanceof g||(currentFlags.u?G:D).test(e)}function d(e,n){if(n.isOneChar(e)){var t=Q(e);return[t,t+1]}0!==n.splitter.lastIndex&&(console.warn("splitter.lastIndex should be 0 at this point",{x:e}),console.trace(),n.splitter.lastIndex=0);var r=n.splitter.exec(e),u=r[1],i=r[2];return n.splitter.lastIndex=0,[Q(u),Q(i)+1]}function g(e){this.intervals=[];var n=currentFlags.u?T:V;"["!=e[0]?this.intervals.push(d(e,n)):e.slice(1,-1).match(n.splitter).sort().reduce(function(e,t){d(t,n);if("0"===e.length)return e},this.intervals)}function h(e){return X?e.reduce(function(e,n){var t=s(n);if(t&&(n=new g(n)),0!==e.length&&t){var r=e[e.length-1];r instanceof g?r.add(n):e.push(n)}else e.push(n);return e},[]):e}function v(){return q.u?"u":""}function x(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return r.apply(void 0,e),0===e.length?"":1===e.length?a(e[0]):e.map(f).join("")}function y(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return 0===e.length?$:new RegExp("(?!"+x.apply(void 0,e)+")",v())}function w(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return new RegExp("("+x.apply(void 0,e)+")",v())}function E(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return r.apply(void 0,e),new RegExp(h(e.map(a)).join("|"),v())}function m(e){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];return new RegExp(x.apply(void 0,r),t(u(n(e),q.u?Y:Z)))}function b(e){for(var n=[],t=arguments.length-1;t-- >0;)n[t]=arguments[t+1];return 0===n.length?m.bind(null,e):m.apply(void 0,[e].concat(n))}function R(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return 0===e.length?$:new RegExp("(?="+x.apply(void 0,e)+")",v())}function O(e){if(!/^\d$/.test(String(e)))throw new Error("Invalid back reference: "+JSON.stringify(e));return new RegExp("\\"+e)}function S(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return new RegExp(x.apply(void 0,e),v())}function j(e){for(var n=[],t=arguments.length-1;t-- >0;)n[t]=arguments[t+1];if(0===n.length)return $;var r=x.apply(void 0,n);return new RegExp(p(r)?r+e:"(?:"+r+")"+e,v())}function C(e){for(var n=[],t=arguments.length-1;t-- >0;)n[t]=arguments[t+1];var r=J.exec(e);if(null==r)throw new SyntaxError("Invalid suffix '"+e+"'.");if(null!=r[1]&&null!=r[2]&&Number(r[1])>Number(r[2]))throw new SyntaxError("numbers out of order in "+e+" quantifier.");return 0===n.length?j.bind(null,e):j.apply(void 0,[e].concat(n))}function A(){function e(e){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];if(k.call(t,e))throw new Error("Attempt to redefine "+e);return t[e]=++r,r+=u,u=0,w.apply(void 0,n)}function n(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return u++,w.apply(void 0,e)}var t={},r=0,u=0;return{names:t,capture:e,nestedAnon:n}}function I(e){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];var u=x.apply(void 0,n);return new RegExp(u,t(this(q,e)))}function N(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];var u="string"==typeof e?n(e):e;return 0===t.length?I.bind(this,u):I.call.apply(I,[this,u].concat(t))}var $=new RegExp(""),k={}.hasOwnProperty,F=[].map,P="unicode"in RegExp.prototype,q={},J=/^(?:\+|\*|\?|\{(\d+)(?:,(\d+)?)?\})\??$/,z=P&&new RegExp("^(?:\\\\u\\{[0-9A-Fa-f]+\\}|\\\\?[^])$","u"),U=/^(?:\\(?:x[0-9A-Fa-f]{0,2}|[^])|\[(?:\\[^]|[^\]])*\])$/,B=/(\\[^])|\[\-|[-()|\[\]]/g,D=/^.$/,G=P&&new RegExp("^.$","u"),H=/.-.|\\.|./,K=P&&new RegExp("","iu"),L=/\\./,M=P&&new RegExp("\\.","u"),Q=function(e,n){return currentFlags.u&&/^\\u{/.test(e)?extractUnicodeEscape(e):'"'===e?34:n.toNum(JSON.parse('"'+e+'"'))},T={isOneChar:z,isEscape:M,splitter:K,toNum:function(e){return e.codePointAt(0)}},V={isOneChar:U,isEscape:L,splitter:H,toNum:function(e){return e.charCodeAt(0)}},W=g.prototype;W.add=function(e){},W.fuseOverlapping=function(){},W.toString=function(){var e=P?String.fromCodePoint:String.fromCharCode;this.intervals.reduce(function(n,t){return t[0]+1===t[1]?n.push(escapeCharSet(e(t[0]))):n.push(escapeCharSet(e(t[0])),t[0]+2===t[1]?"":"-",escapeCharSet(e(t[1]))),n},[]).join("")};var X=!1,Y={u:!0},Z={},_=j.bind(null,""),ee=N.bind(u),ne=N.bind(o),te=N.bind(i),re=Object.freeze({add:ee,keep:te,remove:ne});e.flagOps=re,e.avoid=y,e.capture=w,e.createPseudoNamedCapture=A,e.either=E,e.flags=b,e.group=_,e.lookAhead=R,e.ref=O,e.sequence=S,e.suffix=C});
