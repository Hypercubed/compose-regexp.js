/**@license MIT-compose-regexp.js-©Pierre-Yves Gérardy*/
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("compose-regexp",["exports"],e):e(n.composeRegexp={})}(this,function(n){"use strict";function e(n){return null==n?(console.trace(),{}):n.split("").reduce(function(n,e){return n[e]=!0,n},Object.create(null))}function r(n){return Object.keys(n).join("")}function t(){I=S.call(arguments,function(n){return e(n.flags||"")}).reduce(o,{})}function o(n,e){return Object.assign(n,e)}function u(n,e){return Object.keys(n).forEach(function(r){e[r]||delete n[r]}),n}function i(n,e){return Object.keys(n).forEach(function(r){e[r]&&delete n[r]}),n}function f(n){return n instanceof RegExp?n.source:String(n).replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function l(n){if(-1===n.indexOf("|"))return!1;var e,r=0,t=!1;for(P.lastIndex=0;e=P.exec(n);)if(null==e[1]&&(t||"("!==e[0]||r++,t||")"!==e[0]||r--,t||"["!==e[0]&&"[-"!==e[0]||(t=!0),t&&"]"===e[0]&&(t=!1),0===r&&!t&&"|"===e[0]))return!0;return!1}function a(n){return n=f(n),l(n)?"(?:"+n+")":n}function c(n){if("("!==n.charAt(0)||")"!==n.charAt(n.length-1))return!1;var e,r=0,t=!1;for(P.lastIndex=0;e=P.exec(n);)if(null==e[1]){if(t||"("!==e[0]||r++,!t&&")"===e[0]&&0===--r&&e.index!==n.length-1)return!1;t||"["!==e[0]&&"[-"!==e||(t=!0),t&&"]"===e[0]&&(t=!1)}else if(e.index===n.length-2)return!1;return!0}function p(n){return 1===n.length||q&&I.u&&q.test(n)||F.test(n)||c(n)}function d(){return I.u?"u":""}function g(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return t.apply(void 0,n),0===n.length?"":1===n.length?f(n[0]):n.map(a).join("")}function h(n){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(0===e.length)return k;var t=g.apply(void 0,e);return new RegExp(p(t)?t+n:"(?:"+t+")"+n,d())}function s(n){for(var t=[],u=arguments.length-1;u-- >0;)t[u]=arguments[u+1];return new RegExp(g.apply(void 0,t),r(o(e(n),I.u?z:C)))}function v(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return 0===n.length?k:new RegExp("(?!"+g.apply(void 0,n)+")",d())}function x(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return new RegExp("("+g.apply(void 0,n)+")",d())}function y(){function n(n){for(var e=[],u=arguments.length-1;u-- >0;)e[u]=arguments[u+1];if($.call(r,n))throw new Error("Attempt to redefine "+n);return r[n]=++t,t+=o,o=0,x.apply(void 0,e)}function e(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return o++,x.apply(void 0,n)}var r={},t=0,o=0;return{names:r,capture:n,nestedAnon:e}}function w(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return t.apply(void 0,n),new RegExp(n.map(f).join("|"),d())}function E(n){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return 0===e.length?s.bind(null,n):s.apply(void 0,[n].concat(e))}function b(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return 0===n.length?k:new RegExp("(?="+g.apply(void 0,n)+")",d())}function m(n){if(!/^\d$/.test(String(n)))throw new Error("Invalid back reference: "+JSON.stringify(n));return new RegExp("\\"+n)}function R(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return new RegExp(g.apply(void 0,n),d())}function j(n){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var t=N.exec(n);if(null==t)throw new SyntaxError("Invalid suffix '"+n+"'.");if(null!=t[1]&&null!=t[2]&&Number(t[1])>Number(t[2]))throw new SyntaxError("numbers out of order in "+n+" quantifier.");return 0===e.length?h.bind(null,n):h.apply(void 0,[n].concat(e))}function O(n){for(var e=[],t=arguments.length-1;t-- >0;)e[t]=arguments[t+1];var o=g.apply(void 0,e);return new RegExp(o,r(this(I,n)))}function A(n){return n="string"==typeof n?e(n):n,1===arguments.length?O.bind(this,n):O.apply(this,arguments)}var k=new RegExp(""),$={}.hasOwnProperty,S=[].map,I={},N=/^(?:\+|\*|\?|\{(\d+)(?:,(\d+)?)?\})\??$/,q="unicode"in RegExp.prototype&&new RegExp("^(?:\\\\u\\{[0-9A-Fa-f]+\\}|\\\\?[^])$","u"),F=/^(?:\\(?:x[0-9A-Fa-f]{0,2}|[^])|\[(?:\\[^]|[^\]])*\])$/,P=/(\\[^])|\[\-|[-()|\[\]]/g,z={u:!0},C={},J=h.bind(null,""),B=A.bind(o),D=A.bind(i),G=A.bind(u),H=Object.freeze({add:B,keep:G,remove:D});n.flagOps=H,n.avoid=v,n.capture=x,n.createPseudoNamedCapture=y,n.either=w,n.flags=E,n.group=J,n.lookAhead=b,n.ref=m,n.sequence=R,n.suffix=j});
